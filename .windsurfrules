# Windsurf AI Rules - Next.js + shadcn/ui Project

## Project Stack
- Next.js 14 (App Router)
- React 19
- TypeScript
- shadcn/ui components
- Tailwind CSS
- Framer Motion
- Blockchain: Solana, Ethereum (Web3.js)
- Primary Color: Chartreuse Green (#7fff00)

## Core Principles

### TypeScript Best Practices
- Always use TypeScript with strict mode
- Prefer `interface` over `type`
- No `any` types unless absolutely necessary
- Use proper type inference and generics

### React Development
- Use functional components with the `function` keyword
- Prefer Server Components (default in App Router)
- Only use `"use client"` when absolutely necessary
- Implement proper error and loading states

### Code Style
- Omit semicolons
- Use descriptive variable names (e.g., `isLoading`, `hasError`)
- Use early returns to avoid deep nesting
- Write declarative, readable code

## shadcn/ui Integration

### Always Use shadcn/ui Components
Never recreate components that shadcn/ui provides:

```typescript
// ✅ Correct
import { Button } from "@/components/ui/button"

// ❌ Wrong - don't create custom buttons
const CustomButton = () => { ... }
```

### Essential Imports
```typescript
// UI Components
import { Button } from "@/components/ui/button"
import { Card, CardHeader, CardContent } from "@/components/ui/card"
import { Dialog, DialogContent, DialogTrigger } from "@/components/ui/dialog"
import { Form, FormField, FormItem, FormLabel } from "@/components/ui/form"
import { Input } from "@/components/ui/input"

// Utilities
import { cn } from "@/lib/utils"
```

### Styling Pattern
Use the `cn()` utility for all className compositions:

```typescript
import { cn } from "@/lib/utils"

function MyComponent({ className }: { className?: string }) {
  return (
    <div className={cn(
      "base-styles",
      "responsive-styles md:flex",
      "state-styles hover:bg-accent",
      className
    )}>
      Content
    </div>
  )
}
```

## Tailwind CSS

### Theme Colors
Use CSS variables defined in `app/globals.css`:

```typescript
// Background and text
className="bg-background text-foreground"

// Cards and borders
className="bg-card text-card-foreground border-border"

// Primary (chartreuse green)
className="bg-primary text-primary-foreground"
className="bg-[#7fff00] text-black"  // Direct hex
className="bg-chartreuse"  // Custom class

// Interactive states
className="hover:bg-accent hover:text-accent-foreground"
```

### Responsive Design
```typescript
className="flex flex-col md:flex-row gap-4"
className="text-sm md:text-base lg:text-lg"
className="p-4 md:p-6 lg:p-8"
```

## Form Handling

### Use react-hook-form + Zod
Every form must use this pattern:

```typescript
"use client"

import { zodResolver } from "@hookform/resolvers/zod"
import { useForm } from "react-hook-form"
import * as z from "zod"
import { Button } from "@/components/ui/button"
import { Form, FormField, FormItem, FormLabel, FormControl, FormMessage } from "@/components/ui/form"
import { Input } from "@/components/ui/input"

const schema = z.object({
  email: z.string().email(),
  name: z.string().min(2),
})

export function MyForm() {
  const form = useForm<z.infer<typeof schema>>({
    resolver: zodResolver(schema),
    defaultValues: { email: "", name: "" },
  })

  function onSubmit(values: z.infer<typeof schema>) {
    // Handle submission
  }

  return (
    <Form {...form}>
      <form onSubmit={form.handleSubmit(onSubmit)} className="space-y-4">
        <FormField
          control={form.control}
          name="email"
          render={({ field }) => (
            <FormItem>
              <FormLabel>Email</FormLabel>
              <FormControl>
                <Input {...field} />
              </FormControl>
              <FormMessage />
            </FormItem>
          )}
        />
        <Button type="submit">Submit</Button>
      </form>
    </Form>
  )
}
```

## Component Patterns

### Button Variants
```typescript
import { Button } from "@/components/ui/button"

<Button variant="default">Default</Button>
<Button variant="destructive">Delete</Button>
<Button variant="outline">Cancel</Button>
<Button variant="ghost">Ghost</Button>
<Button variant="link">Link</Button>

// Sizes
<Button size="sm">Small</Button>
<Button size="default">Default</Button>
<Button size="lg">Large</Button>

// With icons
import { ArrowRight, Loader2 } from "lucide-react"

<Button>
  Next <ArrowRight className="ml-2 h-4 w-4" />
</Button>

<Button disabled>
  <Loader2 className="mr-2 h-4 w-4 animate-spin" />
  Loading
</Button>
```

### Card Pattern
```typescript
import { Card, CardHeader, CardTitle, CardDescription, CardContent, CardFooter } from "@/components/ui/card"

<Card>
  <CardHeader>
    <CardTitle>Title</CardTitle>
    <CardDescription>Description</CardDescription>
  </CardHeader>
  <CardContent>
    Content goes here
  </CardContent>
  <CardFooter>
    <Button>Action</Button>
  </CardFooter>
</Card>
```

### Dialog Pattern
```typescript
import { Dialog, DialogTrigger, DialogContent, DialogHeader, DialogTitle, DialogDescription } from "@/components/ui/dialog"

<Dialog>
  <DialogTrigger asChild>
    <Button>Open</Button>
  </DialogTrigger>
  <DialogContent>
    <DialogHeader>
      <DialogTitle>Title</DialogTitle>
      <DialogDescription>Description</DialogDescription>
    </DialogHeader>
    <div>Content</div>
  </DialogContent>
</Dialog>
```

## Animation with Framer Motion

```typescript
"use client"

import { motion } from "framer-motion"

export function Animated() {
  return (
    <motion.div
      initial={{ opacity: 0, y: 20 }}
      animate={{ opacity: 1, y: 0 }}
      transition={{ duration: 0.5, ease: "easeOut" }}
    >
      Content
    </motion.div>
  )
}
```

## Error Handling

```typescript
// Use early returns
function processData(data: unknown) {
  if (!data) return null
  if (!isValid(data)) return null
  
  return transform(data)
}

// Async error handling
async function fetchData() {
  try {
    const res = await fetch("/api/data")
    if (!res.ok) throw new Error("Failed")
    return await res.json()
  } catch (error) {
    console.error(error)
    return null
  }
}

// React error boundaries
"use client"

export function ErrorBoundary({ children }: { children: React.ReactNode }) {
  return (
    <ErrorBoundary fallback={<div>Something went wrong</div>}>
      {children}
    </ErrorBoundary>
  )
}
```

## Server Actions

```typescript
"use server"

import { z } from "zod"

const schema = z.object({
  name: z.string(),
  email: z.string().email(),
})

export async function createUser(data: z.infer<typeof schema>) {
  const validated = schema.parse(data)
  
  try {
    // Perform action
    return { success: true, data: validated }
  } catch (error) {
    return { success: false, error: "Failed to create user" }
  }
}
```

## Accessibility

- Use semantic HTML: `<button>`, `<nav>`, `<main>`, `<article>`
- Add ARIA labels when needed: `aria-label`, `aria-labelledby`
- Ensure keyboard navigation works
- Maintain color contrast (WCAG AA)
- Include focus indicators

## Performance

1. **Optimize Images**
   ```typescript
   import Image from "next/image"
   
   <Image
     src="/image.jpg"
     alt="Description"
     width={800}
     height={600}
     priority={false}
   />
   ```

2. **Dynamic Imports**
   ```typescript
   import dynamic from "next/dynamic"
   
   const HeavyComponent = dynamic(() => import("./HeavyComponent"), {
     ssr: false,
     loading: () => <div>Loading...</div>
   })
   ```

3. **Suspense Boundaries**
   ```typescript
   import { Suspense } from "react"
   
   <Suspense fallback={<Loading />}>
     <AsyncComponent />
   </Suspense>
   ```

## File Organization

### Critical Rules
- **DO NOT create new files unless explicitly asked**
- Work within existing `app/` structure
- Check for existing files before suggesting new ones
- Ask for permission if a new file is absolutely necessary

### Naming Conventions
- Components: PascalCase (`UserProfile.tsx`)
- Utilities: camelCase (`formatDate.ts`)
- Directories: kebab-case (`user-profile/`)

## Blockchain Integration

### Solana
```typescript
import { Connection, PublicKey } from "@solana/web3.js"

const connection = new Connection(process.env.NEXT_PUBLIC_SOLANA_RPC!)
```

### Ethereum
```typescript
import Web3 from "web3"

const web3 = new Web3(window.ethereum)
```

## Installing shadcn/ui Components

```bash
npx shadcn add button
npx shadcn add card
npx shadcn add dialog
npx shadcn add form
npx shadcn add input
npx shadcn add table
```

## Key Reminders

1. ✅ Always use shadcn/ui components
2. ✅ Use `cn()` for className composition
3. ✅ Validate with Zod
4. ✅ Prefer Server Components
5. ✅ Use chartreuse (#7fff00) for accents
6. ✅ Handle errors properly
7. ✅ Ensure accessibility
8. ✅ Optimize performance
9. ❌ Don't create files without permission
10. ❌ Don't use `any` types

## Resources

- shadcn/ui: https://ui.shadcn.com
- Next.js: https://nextjs.org/docs
- Tailwind: https://tailwindcss.com
- Framer Motion: https://www.framer.com/motion

